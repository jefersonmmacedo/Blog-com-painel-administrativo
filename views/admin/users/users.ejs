<%- include('../../partials/header-admin.ejs') %>
<div class="container">

  <%- include('../../partials/head-admin.ejs') %> 
  <div class="categories">
    <h1>Página de listagem de Usuarios</h1>
    <div class="tabela">
      <table class="table table-striped table-dark">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Nome</th>
              <th scope="col">Username</th>
              <th scope="col">email</th>
              <th scope="col">Ações</th>
            </tr>
          </thead>
          <tbody>
            
                   <% users.forEach(user => { %>
                  <tr>
                      <th scope="row"><%= user.id %></th>
                      <td><%= user.name %></td>
                      <td><%= user.username %></td>
                      <td><%= user.email %></td>
                      <td><a href="/admin/users/edit/<%= user.id %>"><button class="btn btn-warning" >Atualizar</button></a>&nbsp;<form action="/admin/users/delete" method="POST" style="display: inline;"   onsubmit="confirmar(event, this)"><input type="hidden" name="id" value="<%= user.id %>"> <button class="btn btn-danger">Deletar</button></form></td>
                  </tr>
                  <% }) %>            
          
          </tbody>
        </table>
  </div>
  </div>      
  
</div>
<%- include('../../partials/footer-admin.ejs') %>

<script>
  function confirmar(event, form) {
    event.preventDefault();
    var decisao = confirm('Deseja deletar a o usuario?')
  
    if(decisao) {
     form.submit();
    } 
  }
  </script>